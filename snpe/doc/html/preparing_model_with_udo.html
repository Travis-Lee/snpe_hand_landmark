<!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  Copyright (c) 2016-2018 Qualcomm Technologies, Inc.
  All Rights Reserved.
  Confidential and Proprietary - Qualcomm Technologies, Inc.
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
-->
<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"></meta>
<meta http-equiv="X-UA-Compatible" content="IE=9"></meta>
<title>Snapdragon Neural Processing Engine SDK: Preparing a model with UDO</title>
<link href="tabs.css" rel="stylesheet" type="text/css"></link>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="autoEnterCurrentDate.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="is.css" rel="stylesheet" type="text/css" ></link>
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Snapdragon Neural Processing Engine SDK
   <span id="projectnumber"></span></div>
   <div id="projectbrief">Reference Guide</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('preparing_model_with_udo.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Preparing a model with UDO </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This section talks about the steps required to convert a framework model with user defined operations(UDO).</p>
<h1><a class="anchor" id="convert_network_with_udo"></a>
Converting a network model with UDO into DLC</h1>
<p><b>snpe-<em>&lt;framework&gt;</em>-to-dlc</b> tools support UDO functionality by accepting configuration file(s) with the option --udo_config_paths. For input UDO config file specifications, see <a class="el" href="udo_operator_definition.html">Defining a UDO</a>.</p>
<p>Currently UDO functionality is supported on TensorFlow and ONNX models. It is also supported on models trained with Caffe2 that are expressed in ONNX formatting. Currently it is not supported for models trained with Caffe.</p>
<p><b>Note:</b> Any modifications in the UDO configuration file should be followed up with re-generation of DLCs to reflect the changes.</p>
<p><b>Converting Tensorflow model with UDO to DLC</b></p>
<p>The following syntax showcases the way TensorFlow models can be converted using UDO:</p>
<pre class="fragment">snpe-tensorflow-to-dlc -i &lt;input-tensorflow-model&gt;
                       -d &lt;input-name&gt; &lt;input-dim&gt;
                       --out_node &lt;output-node-name&gt;
                       --udo_config_paths &lt;input-model.json&gt;
                       -o &lt;output-model.dlc&gt;
</pre><p>where the option --udo_config_paths allows users to specify the UDO configuration file to be used in the conversion.</p>
<p>See <a class="el" href="tools.html#tools_snpe-tensorflow-to-dlc">snpe-tensorflow-to-dlc</a> and <a class="el" href="model_conv_tensorflow.html">TensorFlow Model Conversion</a> for further details.</p>
<p><b>Converting ONNX model with UDO to DLC</b></p>
<p>The following syntax showcases the way ONNX models can be converted using UDO:</p>
<pre class="fragment">snpe-onnx-to-dlc -i &lt;input-onnx-model&gt;
                 --udo_config_paths &lt;input-model.json&gt;
                 -o &lt;output-model.dlc&gt;
</pre><p>where the option --udo_config_paths allows users to specify the UDO configuration file to be used in the conversion.</p>
<h1><a class="anchor" id="quantize_network_with_udo"></a>
Quantizing a DLC with UDO</h1>
<p>Additionally, users may want to quantize converted models having UDOs to run on fixed-point runtimes. SNPE SDK provides the tool <a class="el" href="tools.html#tools_snpe-dlc-quantize">snpe-dlc-quantize</a> for this purpose. This is an offline tool that can be run on the host x86 platform. Since it runs inferences with a representative data-set in order to determine quantization ranges for all layers in the network <em>including UDOs</em>, users will need to provide a UDO package containing CPU reference implementation to the tool. Refer to <a class="el" href="creating_udo_package.html">Creating a UDO Package</a> and <a class="el" href="compiling_udo_package.html">Compiling a UDO package</a> for further instructions on creating such a package for the x86 platform.</p>
<p>The following syntax showcases the way DLCs with UDOs can be quantized with snpe-dlc-quantize:</p>
<pre class="fragment">snpe-dlc-quantize --input_dlc &lt;model.dlc&gt;
                  --input_list &lt;input-list.txt&gt;
                  --udo_package_path &lt;udo-registration-lib&gt;
                  --output_dlc &lt;quantized-model.dlc&gt;
</pre><p>where the option --udo_package_path allows users to specify the absolute path to the UDO registration library. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  Copyright (c) 2016-2018 Qualcomm Technologies, Inc.
  All Rights Reserved.
  Confidential and Proprietary - Qualcomm Technologies, Inc.
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 -->
<!-- start footer part -->
<div id="nav-path" class="navpath" font-size:small;><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      <p align="right">
        80-NL315-14 A <br>
        MAY CONTAIN U.S. AND INTERNATIONAL EXPORT CONTROLLED INFORMATION
        <!--If the Controlled Distribution statement is to be included, uncomment below:-->
        <!--<b>Controlled Distribution - DO NOT COPY</b>-->
        <img class="footer" width:5%; alt="QTI Logo" src="images/QTI_Logo.png" />
      </p>
    </li>
  </ul>
</div>
</body>
</html>
